<div class="dialog-container">
    
    <div class="dialog-header">
        <div class="header-content">
            <h5 class="title">
                <i class="fa-solid fa-file-contract me-2 opacity-50"></i>
                Teklif Detayı
            </h5>
            <span class="status-badge" 
                  [ngClass]="{
                    'pending': offer?.Status === 'Pending',
                    'accepted': offer?.Status === 'Accepted',
                    'rejected': offer?.Status === 'Rejected'
                  }">
                {{ offer?.Status === 'Pending' ? 'Bekliyor' : (offer?.Status === 'Accepted' ? 'Onaylandı' : offer?.Status) }}
            </span>
        </div>
        <button class="btn-close-white" (click)="close()">
            <i class="fa-solid fa-xmark"></i>
        </button>
    </div>

    <div class="dialog-body custom-scroll">
        
        <div *ngIf="isLoading" class="text-center py-5">
            <div class="spinner-border text-primary" role="status"></div>
        </div>

        <div *ngIf="!isLoading && offer">
            
            <div class="info-grid mb-4">
                <div class="info-item">
                    <label>Teklif Başlığı</label>
                    <div class="value fw-bold text-primary">{{ offer.offerTitle }}</div>
                </div>
                <div class="info-item">
                    <label>Müşteri</label>
                    <div class="value">
                        <i class="fa-solid fa-building me-1 text-muted small"></i>
                        {{ customerName || offer.customerId }}
                    </div>
                </div>
                <div class="info-item">
                    <label>Geçerlilik Tarihi</label>
                    <div class="value">{{ offer.expirationDate | date:'dd.MM.yyyy' }}</div>
                </div>
                <div class="info-item full-width" *ngIf="offer.description">
                    <label>Açıklama</label>
                    <div class="value text-muted">{{ offer.description }}</div>
                </div>
            </div>

            <div class="items-container">
    <h6 class="section-title">Ürün / Hizmet Listesi</h6>
    
    <div class="table-scroll-wrapper custom-scroll">
        <table class="table table-borderless mb-0 align-middle">
            <thead>
                <tr>
                    <th class="ps-3" style="width: 40%">Ürün Adı</th>
                    <th class="text-center" style="width: 20%">Miktar</th>
                    <th class="text-end" style="width: 20%">Birim Fiyat</th>
                    <th class="text-end pe-3" style="width: 20%">Toplam</th>
                </tr>
            </thead>
              <tbody>
                        <tr *ngFor="let item of offer.items" class="border-bottom">
                            <td class="ps-3">
                                <div class="fw-bold text-dark">{{ item.stockName }}</div>
                                <div class="small text-muted" style="font-size: 0.75rem;">ID: {{ item.stockId | slice:0:8 }}...</div>
                            </td>
                            <td class="text-center">
                                <span class="badge bg-light text-dark border">{{ item.quantity }}</span>
                            </td>
                            <td class="text-end text-muted">
                                {{ item.unitPrice | number:'1.2-2' }} ₺
                            </td>
                            <td class="text-end fw-bold text-dark pe-3">
                                {{ item.totalPrice | number:'1.2-2' }} ₺
                            </td>
                        </tr>
                    </tbody>
        </table>
    </div>
    </div>

            <div class="total-section mt-3">
                <div class="d-flex justify-content-end align-items-center gap-3">
                    <span class="text-secondary text-uppercase fw-bold small">Genel Toplam</span>
                    <span class="grand-total">{{ offer.totalAmount | number:'1.2-2' }} ₺</span>
                </div>
            </div>

        </div>
    </div>

    <div class="dialog-footer">
        <button class="button-4" (click)="close()">Kapat</button>
    </div>
</div>