<div class="container py-4" style="max-height: 90vh; overflow-y: auto;">
  <h2 class="mb-4">{{ lang.view }} - {{ data.name }}</h2>

  <div class="row g-4">

    <div class="col-md-6">
      <label class="form-label">{{ lang.customerName }}</label>
      <input type="text" class="form-control custom-input" [value]="data.customerId" readonly>
    </div>

    <div class="col-md-6">
      <label class="form-label">{{ lang.name }}</label>
      <input type="text" class="form-control custom-input" [value]="data.name" readonly>
    </div>

    <div class="col-12">
      <label class="form-label">{{ lang.description }}</label>
      <textarea rows="3" class="form-control custom-input" [value]="data.description" readonly></textarea>
    </div>

    <div class="col-md-6">
      <label class="form-label">{{ lang.priority }}</label>
      <input type="text" class="form-control custom-input" [value]="data.priority">
    </div>

    <div class="col-md-6">
      <label class="form-label">Durum</label>
      <input type="text" class="form-control custom-input" [value]="data.status">
    </div>

    <div class="col-md-6">
      <label class="form-label">Tamamlanma Zamanı</label>
      <input type="text" class="form-control custom-input"
             [value]="data.completedAt | date:'d MMMM y HH:mm':'':'tr-TR'"
             placeholder="Henüz tamamlanmamış!" readonly>
    </div>

    <div class="col-md-6">
      <label class="form-label">Atanan Personel</label>
      <input type="text" class="form-control custom-input" [value]="data.assignedEmployeeId">
    </div>

<div class="col-12" *ngIf="data.signatureBase64">
  <label class="form-label fw-bold">Yetkili İmzası</label>
  
  <div class="d-grid">
    <button type="button" 
            class="btn btn-outline-secondary d-flex justify-content-between align-items-center" 
            (click)="toggleImage()">
      <span>
        <i class="fa-solid fa-image me-2"></i>
        {{ showImage ? 'İmzayı Gizle' : 'İmzayı Göster' }}
      </span>
      <i class="fa-solid" [class.fa-chevron-up]="showImage" [class.fa-chevron-down]="!showImage"></i>
    </button>
  </div>

  <div *ngIf="showImage" class="mt-3 text-center p-2 bg-light border rounded">
    <img [src]="data.signatureBase64" 
         class="img-fluid rounded shadow-sm" 
         style="max-height: 300px; object-fit: contain;" 
         alt="Görev Görseli">
      <div class="mt-2">
        <a [href]="data.signatureBase64" download="gorsel.png" class="btn btn-sm btn-link text-decoration-none">
           <i class="fa-solid fa-download"></i> İndir / Tam Boyut
        </a>
      </div>
  </div>
</div>

    
    </div>
<div class="d-flex justify-content-end gap-2 mt-4 pt-3 border-top">
  
  <button *ngIf="data.status !== 'Tamamlandı'" 
          class="btn btn-outline-success btn-pill px-4 py-2 shadow-sm" 
          (click)="markAsCompleted(data.id)">
    <i class="fa-solid fa-check me-2"></i> Tamamla
  </button>

  <button class="btn btn-outline-danger btn-pill px-4 py-2 shadow-sm" 
      (click)="close()">
    <i class="fa-solid fa-circle-xmark me-2"></i> Kapat
  </button>

</div>
</div>