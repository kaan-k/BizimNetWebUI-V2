<div class="container-fluid calendar-container py-3">

    <button *ngFor="let emp of employees" class="btn button-4" style="margin-bottom: 1rem; margin-left: 1rem;"
        [ngClass]="{ 'active-btn': selectedId === emp.id }" (click)="loadDutyForEmployee(emp.id)">
        <i class="fa-solid fa-user me-1"></i>
        {{ emp.firstName }}
    </button>

    <button class="btn button-4" style="margin-bottom: 1rem; margin-left: 1rem;"
        [ngClass]="{ 'active-btn': selectedId === '' }" (click)="loadDuties()">
        <i class="fa-solid fa-user me-1"></i>
        Hepsi
    </button>
    <button class="btn button-4" style="margin-bottom: 1rem; margin-left: 1rem;"
        [ngClass]="{ 'active-btn': selectedId === 'cmp' }" (click)="loadDutyByStatus('Tamamlandı','cmp')">
        <i class="fa-solid fa-check"></i>
        Tamamlanmışlar
    </button>

    <button class="btn button-4" style="margin-bottom: 1rem; margin-left: 1rem;"
        [ngClass]="{ 'active-btn': selectedId === 'uncmp' }" (click)="loadDutyByStatus('Tamamlanmamış','uncmp')">
        <i class="fa-solid fa-xmark"></i>
        Tamamlanmamışlar
    </button>

      <div
        class="mb-3 d-flex flex-column flex-sm-row justify-content-between align-items-stretch align-items-sm-center">
                <div class="btn-group mb-2 mb-sm-0 w-100 w-sm-auto">
                  <button mwlCalendarPreviousView [view]="view" [(viewDate)]="viewDate"
                class="btn btn-outline-secondary">&lt;</button>
                  <button mwlCalendarToday [(viewDate)]="viewDate" class="btn btn-outline-secondary">Bugün</button>
                  <button mwlCalendarNextView [view]="view" [(viewDate)]="viewDate"
                class="btn btn-outline-secondary">&gt;</button>
                </div>

            <div class="btn-group w-100 w-sm-auto mb-2 mb-sm-0">
                  <button class="btn" [class.btn-primary]="view === CalendarView.Month"
                [class.btn-outline-secondary]="view !== CalendarView.Month"
                (click)="setView(CalendarView.Month)">Ay</button>
                  <button class="btn" [class.btn-primary]="view === CalendarView.Week"
                [class.btn-outline-secondary]="view !== CalendarView.Week"
                (click)="setView(CalendarView.Week)">Hafta</button>
                  <button class="btn" [class.btn-primary]="view === CalendarView.Day"
                [class.btn-outline-secondary]="view !== CalendarView.Day"
                (click)="setView(CalendarView.Day)">Gün</button>
                </div>

        <div class="d-flex flex-grow-1 flex-column flex-sm-row gap-2 mt-2 mt-sm-0 ms-sm-2">
            <button class="btn btn-success w-100" (click)="openAddQuickDutyDialog()">Hızlı Görev Gir</button>
            <button class="btn btn-primary w-100" (click)="openAddDutyDialog()">+ Yeni Görev</button>
        </div>

         
    </div>

      <h3 class="mb-3">{{ viewDate | calendarDate:(view + 'ViewTitle') }}</h3>

        <mwl-calendar-month-view     *ngIf="view === CalendarView.Month"     [viewDate]="viewDate"     [events]="events"
            [refresh]="refresh"     [activeDayIsOpen]="activeDayIsOpen"     [weekStartsOn]="1"     [locale]="locale"    
        (dayClicked)="dayClicked($event)"     (eventTimesChanged)="eventTimesChanged($event)">
          </mwl-calendar-month-view>

      <mwl-calendar-week-view
  *ngIf="view === CalendarView.Week"
  [viewDate]="viewDate"
  [dayStartHour]="9"
  [dayEndHour]="18"
  [events]="events"
  [locale]="locale"
  [refresh]="refresh"
  [weekStartsOn]="1"
  (eventClicked)="eventClicked($event)">
</mwl-calendar-week-view>



      <mwl-calendar-day-view     *ngIf="view === CalendarView.Day"     [viewDate]="viewDate"     [events]="events"    
        [refresh]="refresh"     (eventClicked)="eventClicked($event)">
          </mwl-calendar-day-view>

        <div class="backdrop" *ngIf="showModal" (click)="closeInfoModal()">
            <div class="modal-card" (click)="$event.stopPropagation()">
                  <div class="modal-header d-flex justify-content-between align-items-center">
                        <h6 class="modal-title">{{ modalData?.action }}</h6>
                        <button class="btn" (click)="closeInfoModal()">×</button>
                      </div>
                  <div class="modal-body">
                <pre>{{ modalData?.event | json }}</pre>
            </div>
                  <div class="modal-footer">
                        <button class="btn" (click)="closeInfoModal()">Kapat</button>
                      </div>
                </div>
          </div>
</div>